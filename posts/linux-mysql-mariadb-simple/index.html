<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Linux 下 MariaDB/MySql 的安装配置、用户管理和备份 - Shawn's blog</title><meta name=Description content="分享我的知识、经验、生活与感悟"><meta property="og:url" content="https://blog.programmer.work/posts/linux-mysql-mariadb-simple/"><meta property="og:site_name" content="Shawn's blog"><meta property="og:title" content="Linux 下 MariaDB/MySql 的安装配置、用户管理和备份"><meta property="og:description" content="0x00 MariaDB的身世 自从MySQL被Oracle收购之后，社区就一直担心MySQL可能会被闭源或者一些其他的原因导致MySQL的支持出现问题。所以现在好多发行版本默认的数据库都从MySQL转移到了Mariadb。而且社区也开始大力支持Mariadb，再加上Mariadb的使用和API和MySQL完全一样，所以这里选择使用Mariadb而不是MySQL。"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-11-20T14:17:00+00:00"><meta property="article:modified_time" content="2025-01-16T09:29:10+00:00"><meta property="article:tag" content="MySQL"><meta property="article:tag" content="Database"><meta property="og:image" content="https://blog.programmer.work/logo.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.programmer.work/logo.png"><meta name=twitter:title content="Linux 下 MariaDB/MySql 的安装配置、用户管理和备份"><meta name=twitter:description content="0x00 MariaDB的身世 自从MySQL被Oracle收购之后，社区就一直担心MySQL可能会被闭源或者一些其他的原因导致MySQL的支持出现问题。所以现在好多发行版本默认的数据库都从MySQL转移到了Mariadb。而且社区也开始大力支持Mariadb，再加上Mariadb的使用和API和MySQL完全一样，所以这里选择使用Mariadb而不是MySQL。"><meta name=application-name content="Shawn's blog"><meta name=apple-mobile-web-app-title content="Shawn's blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://blog.programmer.work/posts/linux-mysql-mariadb-simple/><link rel=prev href=https://blog.programmer.work/posts/firewall-cmd-port-forward/><link rel=next href=https://blog.programmer.work/posts/python-threading/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Linux 下 MariaDB/MySql 的安装配置、用户管理和备份","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.programmer.work\/posts\/linux-mysql-mariadb-simple\/"},"genre":"posts","keywords":"MySQL, Database","wordcount":2680,"url":"https:\/\/blog.programmer.work\/posts\/linux-mysql-mariadb-simple\/","datePublished":"2016-11-20T14:17:00+00:00","dateModified":"2025-01-16T09:29:10+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Shawn"},"description":""}</script></head><body data-header-desktop=auto data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"dark"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Shawn's blog">Shawn's blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/about/>关于 </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Shawn's blog">Shawn's blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/about/ title>关于</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Linux 下 MariaDB/MySql 的安装配置、用户管理和备份</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://blog.programmer.work title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Shawn</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2016-11-20>2016-11-20</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;约 2680 字&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;预计阅读 6 分钟&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents></nav></div></div><div class=content id=content><h1 id=0x00-mariadb的身世>0x00 MariaDB的身世</h1><p>自从MySQL被Oracle收购之后，社区就一直担心MySQL可能会被闭源或者一些其他的原因导致MySQL的支持出现问题。所以现在好多发行版本默认的数据库都从MySQL转移到了Mariadb。而且社区也开始大力支持Mariadb，再加上Mariadb的使用和API和MySQL完全一样，所以这里选择使用Mariadb而不是MySQL。</p><blockquote><p>MariaDB数据库管理系统是MySQL的一个分支，主要由开源社区在维护，采用GPL授权许可。开发这个分支的原因之一是：甲骨文公司收购了MySQL后，有将MySQL闭源的潜在风险，因此社区采用分支的方式来避开这个风险。
MariaDB的目的是完全兼容MySQL，包括API和命令行，使之能轻松成为MySQL的代替品。在存储引擎方面，10.0.9版起使用XtraDB（名称代号为Aria）来代替MySQL的InnoDB。
MariaDB由MySQL的创始人麦克尔·维德纽斯主导开发，他早前曾以10亿美元的价格，将自己创建的公司MySQL AB卖给了SUN，此后，随着SUN被甲骨文收购，MySQL的所有权也落入Oracle的手中。MariaDB名称来自麦克尔·维德纽斯的女儿玛丽亚（英语：Maria）的名字。——————————维基百科</p></blockquote><h1 id=0x01-安装mariadb>0X01 安装Mariadb</h1><p>MariaDB是一组软件，如果只安装一部分的话后期扩展可能会出现问题，所以我们可以一次安装整个软件组</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    <span style=color:#f92672>[</span>root@iZ28jaak5nnZ ~<span style=color:#f92672>]</span><span style=color:#75715e># yum groupinstall mariadb mariadb-client -y</span>
</span></span></code></pre></div><p>安装需要一点时间，我们只需要等待安装结束。</p><h1 id=0x02-打开mariadb服务并配置防火墙>0X02 打开Mariadb服务并配置防火墙</h1><p>启动Mariadb服务。在CentOS7.x中推荐使用systemctl来配置服务的启动方式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    systemctl start mariadb.service
</span></span></code></pre></div><p>配置防火墙，允许从MariaDB使用的3306端口监听，由于历史遗留问题，这里还是称之为MySql。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    <span style=color:#f92672>[</span>root@iZ28jaak5nnZ ~<span style=color:#f92672>]</span><span style=color:#75715e># firewall-cmd --add-service=mysql</span>
</span></span><span style=display:flex><span>    success
</span></span><span style=display:flex><span>    <span style=color:#f92672>[</span>root@iZ28jaak5nnZ ~<span style=color:#f92672>]</span><span style=color:#75715e># firewall-cmd --list-services</span>
</span></span><span style=display:flex><span>    dhcpv6-client mysql ssh
</span></span></code></pre></div><h1 id=0x03-配置mariadb的安全性>0X03 配置MariaDB的安全性</h1><p>MariaDB提供了一个脚本来为新安装的MariaDB提升安全性。但是在使用这个脚本之前必须要先打开MariaDB服务。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    <span style=color:#f92672>[</span>root@iZ28jaak5nnZ ~<span style=color:#f92672>]</span><span style=color:#75715e># systemctl start mariadb</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[</span>root@iZ28jaak5nnZ ~<span style=color:#f92672>]</span><span style=color:#75715e># systemctl enable mariadb</span>
</span></span><span style=display:flex><span>    ln -s <span style=color:#e6db74>&#39;/usr/lib/systemd/system/mariadb.service&#39;</span> <span style=color:#e6db74>&#39;/etc/systemd/system/multi-user.target.wants/mariadb.service&#39;</span>
</span></span></code></pre></div><p>然后运行这个脚本，这个脚本会有几次提示：</p><ol><li>询问当前密码，如果没设置密码就直接回车</li><li>设置root用户的密码</li><li>删除匿名用户(anonymous-user)</li><li>删除可以从外部登陆的root用户</li><li>删除test测试数据库</li><li>重载数据库</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    <span style=color:#f92672>[</span>root@iZ28jaak5nnZ ~<span style=color:#f92672>]</span><span style=color:#75715e># mysql_secure_installation</span>
</span></span><span style=display:flex><span>    /usr/bin/mysql_secure_installation: line 379: find_mysql_client: command not found
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB
</span></span><span style=display:flex><span>          SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    In order to log into MariaDB to secure it, we<span style=color:#e6db74>&#39;ll need the current
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    password for the root user.  If you&#39;</span>ve just installed MariaDB, and
</span></span><span style=display:flex><span>    you haven<span style=color:#e6db74>&#39;t set the root password yet, the password will be blank,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    so you should just press enter here.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Enter current password for root (enter for none):
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    OK, successfully used password, moving on...
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Setting the root password ensures that nobody can log into the MariaDB
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    root user without the proper authorisation.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Set root password? [Y/n] y
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    New password:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Re-enter new password:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Password updated successfully!
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Reloading privilege tables..
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     ... Success!
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    By default, a MariaDB installation has an anonymous user, allowing anyone
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    to log into MariaDB without having to have a user account created for
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    them.  This is intended only for testing, and to make the installation
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    go a bit smoother.  You should remove them before moving into a
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    production environment.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Remove anonymous users? [Y/n] y
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     ... Success!
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Normally, root should only be allowed to connect from &#39;</span>localhost<span style=color:#e6db74>&#39;.  This
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    ensures that someone cannot guess at the root password from the network.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Disallow root login remotely? [Y/n] y
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     ... Success!
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    By default, MariaDB comes with a database named &#39;</span>test<span style=color:#960050;background-color:#1e0010>&#39;</span> that anyone can
</span></span><span style=display:flex><span>    access.  This is also intended only <span style=color:#66d9ef>for</span> testing, and should be removed
</span></span><span style=display:flex><span>    before moving into a production environment.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Remove test database and access to it? <span style=color:#f92672>[</span>Y/n<span style=color:#f92672>]</span> y
</span></span><span style=display:flex><span>     - Dropping test database...
</span></span><span style=display:flex><span>     ... Success!
</span></span><span style=display:flex><span>     - Removing privileges on test database...
</span></span><span style=display:flex><span>     ... Success!
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Reloading the privilege tables will ensure that all changes made so far
</span></span><span style=display:flex><span>    will take effect immediately.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Reload privilege tables now? <span style=color:#f92672>[</span>Y/n<span style=color:#f92672>]</span> y
</span></span><span style=display:flex><span>     ... Success!
</span></span></code></pre></div><h1 id=0x04-登陆到mariadb>0X04 登陆到MariaDB</h1><p>配置好密码和接入点之后就可以登录到MariaDB了。使用mysql命令来登陆MariaDB。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    <span style=color:#f92672>[</span>root@iZ28jaak5nnZ ~<span style=color:#f92672>]</span><span style=color:#75715e># mysql -h localhost -u root -p</span>
</span></span><span style=display:flex><span>    Enter password:
</span></span><span style=display:flex><span>    Welcome to the MariaDB monitor.  Commands end with ; or <span style=color:#ae81ff>\g</span>.
</span></span><span style=display:flex><span>    Your MariaDB connection id is <span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>    Server version: 5.5.50-MariaDB MariaDB Server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Copyright <span style=color:#f92672>(</span>c<span style=color:#f92672>)</span> 2000, 2016, Oracle, MariaDB Corporation Ab and others.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Type <span style=color:#e6db74>&#39;help;&#39;</span> or <span style=color:#e6db74>&#39;\h&#39;</span> <span style=color:#66d9ef>for</span> help. Type <span style=color:#e6db74>&#39;\c&#39;</span> to clear the current input statement.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt;
</span></span></code></pre></div><p>参数：-h 指定主机， -u 指定用户， -p 指定密码
这三个参数都可以省略，当我们省略主机名的时候就默认登录到本地，当省略用户名的时候默认使用root，当省略密码的时候默认没有密码登陆</p><h1 id=0x05-用户管理>0X05 用户管理</h1><p>在MariaDB中有用户的概念和权限的概念。用户名+密码+登陆地点，三个选项唯一确定一个用户，就比如同一个用户名<code>shawn</code>在10.13.1.2和在10.13.1.3的登陆密码可以是不同的，这在MariaDB里会分成两条来存储。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    创建一个名为shawn的，从localhost登陆的，密码为test的用户
</span></span><span style=display:flex><span>    MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt; CREATE USER <span style=color:#e6db74>&#39;shawn&#39;</span>@<span style=color:#e6db74>&#39;localhost&#39;</span> IDENTIFIED BY <span style=color:#e6db74>&#39;test&#39;</span>;
</span></span><span style=display:flex><span>    Query OK, <span style=color:#ae81ff>0</span> rows affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    创建一个名为shawn_test的，任意地点，密码为6666的用户
</span></span><span style=display:flex><span>    MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt; CREATE USER <span style=color:#e6db74>&#39;shawn_test&#39;</span>@<span style=color:#e6db74>&#39;%&#39;</span> IDENTIFIED BY <span style=color:#e6db74>&#39;6666&#39;</span>;
</span></span><span style=display:flex><span>    Query OK, <span style=color:#ae81ff>0</span> rows affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>而且在MariaDB中用户和权限是分开的，如果只添加一个用户的话，这个用户是没有任何权限的。</p><p>删除用户的话是使用<code>DROP</code>命令</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt; DROP USER heiheihei@<span style=color:#e6db74>&#39;localhost&#39;</span>;
</span></span><span style=display:flex><span>    Query OK, <span style=color:#ae81ff>0</span> rows affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>
</span></span></code></pre></div><h1 id=0x06-权限管理>0X06 权限管理</h1><p>登录到MariaDB之后可以给用户添加具体的权限，使用<code>GRANT</code>命令。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    允许从localhost登陆的shawn对mysql数据库的user表执行查询
</span></span><span style=display:flex><span>    MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt; GRANT SELECT ON mysql.user to shawn@<span style=color:#e6db74>&#39;localhost&#39;</span>;
</span></span><span style=display:flex><span>    Query OK, <span style=color:#ae81ff>0</span> rows affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    允许从localhost登陆的shawn对mysql数据库的user表执行查询和插入
</span></span><span style=display:flex><span>    MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt; GRANT SELECT, INSERT ON mysql.user to shawn@<span style=color:#e6db74>&#39;localhost&#39;</span>;
</span></span><span style=display:flex><span>    Query OK, <span style=color:#ae81ff>0</span> rows affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    允许从localhost登陆的shawn对mysql数据库的user表执行增删查改四种操作
</span></span><span style=display:flex><span>    MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt; GRANT ALL ON mysql.user to shawn@<span style=color:#e6db74>&#39;localhost&#39;</span>;
</span></span><span style=display:flex><span>    Query OK, <span style=color:#ae81ff>0</span> rows affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    允许从localhost登陆的shawn对mysql数据库的所有表执行增删查改四种操作
</span></span><span style=display:flex><span>    MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt; GRANT ALL ON mysql.* to shawn@<span style=color:#e6db74>&#39;localhost&#39;</span>;
</span></span><span style=display:flex><span>    Query OK, <span style=color:#ae81ff>0</span> rows affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    允许从localhost登陆的shawn对所有库的所有表执行增删查改四种操作
</span></span><span style=display:flex><span>    MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt; GRANT ALL ON *.* to shawn@<span style=color:#e6db74>&#39;localhost&#39;</span>;
</span></span><span style=display:flex><span>    Query OK, <span style=color:#ae81ff>0</span> rows affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    允许从任意地点登陆的shawn对所有库的所有表执行增删查改四种操作
</span></span><span style=display:flex><span>    MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt; GRANT ALL ON *.* to shawn@<span style=color:#e6db74>&#39;%&#39;</span>;
</span></span><span style=display:flex><span>    Query OK, <span style=color:#ae81ff>0</span> rows affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>使用<code>REVOKE</code>可以删除给定的权限，使用方法和<code>GRANT</code>是一样的，只是开头不同而已
使用<code>FLUSH PRIVILEGES;</code>可以刷新权限信息
使用<code>SHOW GRANT FOR root@localhost</code>可以查看某用户的权限信息</p><h1 id=0x07-数据库备份>0X07 数据库备份</h1><p>MariaDB有逻辑备份和物理备份两种备份方案，逻辑备份就是可以把表结构数据等导出成sql文件，而物理备份就是直接备份文件。
逻辑备份比较慢，因为要将备份的数据全部都查询一遍，但是可以不下线备份；物理备份比较快，但是需要下线备份。这里说的是逻辑备份.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    <span style=color:#f92672>[</span>root@iZ28jaak5nnZ ~<span style=color:#f92672>]</span><span style=color:#75715e># mysqldump -u root -h localhost -p --all-databases &gt; backup.sql</span>
</span></span><span style=display:flex><span>    Enter password:
</span></span></code></pre></div><p>这里我使用了一个<code>--all-databases</code>的参数，是备份所有数据库，可选的参数有下面这几个</p><ol><li><code>--all-databases</code>备份所有数据库</li><li><code>--add-drop-tables</code>生成的sql中包含drop tables语句，删除以前的table</li><li><code>--no-data</code>只生成库和表结构，没有数据</li><li><code>--lock-all-tables</code>在备份结束之前，锁定所有表，保证数据完整性</li><li><code>--add-drop-databases</code>生成的sql中包含drop database语句，删除以前的database</li></ol><h1 id=0x08-数据库还原>0X08 数据库还原</h1><p>当我们有了一个备份出来的sql文件之后，可以将这个sql直接导入到数据库。这了的用法和之前登录到MariaDB的方法是一样的，只是将sql文件重定向过去就可以了</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    <span style=color:#f92672>[</span>root@iZ28jaak5nnZ ~<span style=color:#f92672>]</span><span style=color:#75715e># mysql -u root -h localhost -p &lt; backup.sql</span>
</span></span><span style=display:flex><span>    Enter password:
</span></span></code></pre></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2025-01-16</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/mysql/>MySQL</a>,&nbsp;<a href=/tags/database/>Database</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/firewall-cmd-port-forward/ class=prev rel=prev title="CentOS7 中使用 firewall-cmd 控制端口和端口转发"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>CentOS7 中使用 firewall-cmd 控制端口和端口转发</a>
<a href=/posts/python-threading/ class=next rel=next title="Python 使用 threading 实现多线程">Python 使用 threading 实现多线程<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=gitalk class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://github.com/gitalk/gitalk></a>Gitalk</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.152.2">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2015 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://blog.programmer.work target=_blank>Shawn</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/gitalk/gitalk.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><script type=text/javascript src=/lib/gitalk/gitalk.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/contrib/auto-render.min.js></script><script type=text/javascript src=/lib/katex/contrib/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:50},comment:{gitalk:{admin:["shawn-bluce"],clientID:"Ov23ligzD7mU8WBsue6H",clientSecret:"a832d1ba967e3a40f5485aa05e2a9e76f2d77901",id:"2016-11-20T14:17:00Z",owner:"shawn-bluce",repo:"Blog Comments",title:"Linux 下 MariaDB/MySql 的安装配置、用户管理和备份"}},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>