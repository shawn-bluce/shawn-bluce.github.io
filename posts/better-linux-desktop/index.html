<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>在 Linux 桌面下活得舒服 - Shawn's blog</title><meta name=Description content="分享我的知识、经验、生活与感悟"><meta property="og:url" content="https://blog.programmer.work/posts/better-linux-desktop/"><meta property="og:site_name" content="Shawn's blog"><meta property="og:title" content="在 Linux 桌面下活得舒服"><meta property="og:description" content="0X00 前言 这篇博客的目标读者：正在使用Linux桌面，打算长期继续使用下去的同学（这也就意味着熟悉Linux下的基础操作，理解Linux下的常见概念）。"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-11-02T14:13:00+00:00"><meta property="article:modified_time" content="2025-01-16T07:32:03+00:00"><meta property="article:tag" content="Linux"><meta property="og:image" content="https://blog.programmer.work/logo.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.programmer.work/logo.png"><meta name=twitter:title content="在 Linux 桌面下活得舒服"><meta name=twitter:description content="0X00 前言 这篇博客的目标读者：正在使用Linux桌面，打算长期继续使用下去的同学（这也就意味着熟悉Linux下的基础操作，理解Linux下的常见概念）。"><meta name=application-name content="Shawn's blog"><meta name=apple-mobile-web-app-title content="Shawn's blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://blog.programmer.work/posts/better-linux-desktop/><link rel=prev href=https://blog.programmer.work/posts/living-on-linux-desktop/><link rel=next href=https://blog.programmer.work/posts/mysql-slowquer-simple/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"在 Linux 桌面下活得舒服","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.programmer.work\/posts\/better-linux-desktop\/"},"genre":"posts","keywords":"Linux","wordcount":3739,"url":"https:\/\/blog.programmer.work\/posts\/better-linux-desktop\/","datePublished":"2019-11-02T14:13:00+00:00","dateModified":"2025-01-16T07:32:03+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Shawn"},"description":""}</script></head><body data-header-desktop=auto data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Shawn's blog">Shawn's blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/about/>关于 </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Shawn's blog">Shawn's blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/about/ title>关于</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">在 Linux 桌面下活得舒服</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Shawn</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2019-11-02>2019-11-02</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;约 3739 字&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;预计阅读 8 分钟&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#z>z</a></li><li><a href=#fabric>fabric</a></li><li><a href=#extract>extract</a></li><li><a href=#thefuck>thefuck</a></li><li><a href=#zsh-autosuggestions和zsh-syntax-highlighting>zsh-autosuggestions和zsh-syntax-highlighting</a></li><li><a href=#一句话介绍其他的>一句话介绍其他的：</a></li></ul></nav></div></div><div class=content id=content><h1 id=0x00-前言>0X00 前言</h1><p>这篇博客的目标读者：正在使用Linux桌面，打算长期继续使用下去的同学（这也就意味着熟悉Linux下的基础操作，理解Linux下的常见概念）。</p><p>这里有一个我之前写的“<a href=https://blog.just666.com/2019/10/29/use-linux/ target=_blank rel="noopener noreffer">在Linux桌面下存活</a>”可以参考一下。</p><h1 id=0x01-颜值就是战斗力>0X01 颜值就是战斗力</h1><p><strong>Linux也不都是黑色背景白色字的命令行。</strong></p><p>首先要换的就是一套主题和图标，不论是KDE、Gnome还是Xfce都可以在对应的网站找到大量的主题，简单换过图标和主题之后再配合一张好看的壁纸，整个观感立马就好了不少。</p><blockquote><p>KDE: <a href=https://store.kde.org/ target=_blank rel="noopener noreffer">https://store.kde.org/</a>
Gnome: <a href=https://www.gnome-look.org/ target=_blank rel="noopener noreffer">https://www.gnome-look.org/</a>
Xfce: <a href=https://www.xfce-look.org/ target=_blank rel="noopener noreffer">https://www.xfce-look.org/</a></p></blockquote><p>然后要换的就是字体了，<a href=https://zh.wikipedia.org/zh-hans/%E7%AD%89%E5%AE%BD%E5%AD%97%E4%BD%93 target=_blank rel="noopener noreffer">等宽字体</a>我推荐这几个<a href=https://sourcefoundry.org/hack/ target=_blank rel="noopener noreffer">Hack</a>、<a href=https://github.com/adobe-fonts/source-code-pro target=_blank rel="noopener noreffer">Source Code Pro</a>、<a href=https://github.com/microsoft/cascadia-code target=_blank rel="noopener noreffer">Cascadia Code</a>都很好看，适合在终端、IDE和编辑器里使用。</p><p>最后就是zsh主题，如果使用的是zsh的话推荐使用<a href=https://github.com/romkatv/powerlevel10k target=_blank rel="noopener noreffer">powerlevel10k</a>这个主题，是由<a href=https://github.com/Powerlevel9k/powerlevel9k target=_blank rel="noopener noreffer">powerlevel9k</a>发展而来的，但是速度比<code>powerlevel9k</code>快好多。</p><h1 id=0x02-善用alias和bash函数>0X02 善用alias和bash函数</h1><p>相信大家在初学Linux的时候都学过<code>alias</code>指令，没学过的话我简单介绍一句：“alias是给命令取别名的工具，例如执行<code>alias new_ls="ls -l"</code>过后再使用<code>new_ls</code>命令就和使用<code>ls -l</code>一样了”。</p><p>首先我们知道将<code>alias</code>命令直接写在shell里，在关闭重开shell之后就失效了（起码现在知道了）。所以我们要把<code>alias</code>写在<code>.bashrc</code>或者<code>.zshrc</code>中（依你使用的shell而定）。现在我的<code>.zshrc</code>中就有很多已经写好了的，下面给大家分项几个对大家都有用的</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    <span style=color:#75715e># alias for simple command</span>
</span></span><span style=display:flex><span>    alias f<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;open .&#39;</span>    <span style=color:#75715e># 用图形文件管理器打开当前目录</span>
</span></span><span style=display:flex><span>    alias h<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;open ~&#39;</span>
</span></span><span style=display:flex><span>    alias py<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ipython3&#39;</span>
</span></span><span style=display:flex><span>    alias py2<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ipython2&#39;</span>
</span></span><span style=display:flex><span>    alias du<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;/usr/bin/ncdu&#39;</span>    <span style=color:#75715e># ncdu是一个命令行里可视化查看磁盘（目录）占用率的工具</span>
</span></span><span style=display:flex><span>    alias cat<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;/usr/bin/bat&#39;</span>    <span style=color:#75715e># bat是一个带语法高亮、行号显示且能够上下滚动的cat加强版</span>
</span></span><span style=display:flex><span>    alias down<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;aria2c -x16 -j4&#39;</span>    <span style=color:#75715e># 使用aria2进行多线程下载</span>
</span></span><span style=display:flex><span>    alias me<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;cd </span>$HOME<span style=color:#e6db74>/Workstadion/ &amp;&amp; ls&#34;</span>
</span></span><span style=display:flex><span>    alias connect_android<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;scrcpy --bit-rate 256M&#34;</span>  <span style=color:#75715e># 使用scrcpy连接到接入电脑的Android手机</span>
</span></span><span style=display:flex><span>    alias code<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;LANG=&#34;zh_CN.UTF-8&#34; LANGUAGE=&#34;zh_CN.UTF-8&#34; code&#39;</span>     <span style=color:#75715e># 用VSCode打开</span>
</span></span><span style=display:flex><span>    alias jwt<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;python3 </span>$HOME<span style=color:#e6db74>/Workstadion/script/get_token.py jwt&#34;</span>   <span style=color:#75715e># 自己编写的方便获取开发环境jwt token的工具</span>
</span></span><span style=display:flex><span>    alias token<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;python3 </span>$HOME<span style=color:#e6db74>/Workstadion/script/get_token.py token&#34;</span>
</span></span><span style=display:flex><span>    alias open<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;LANG=&#34;zh_CN.UTF-8&#34; xdg-open &gt; /dev/null 2&gt; /dev/null&#39;</span>   <span style=color:#75715e># 使用对应的工具打开文件</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># alias to source command   # 映射到原始工具</span>
</span></span><span style=display:flex><span>    alias _du<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;/usr/bin/du&#39;</span>
</span></span><span style=display:flex><span>    alias _cat<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;/usr/bin/cat&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># alias some command for network and proxy  # 使用代理做一些事情</span>
</span></span><span style=display:flex><span>    alias use_proxy<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ALL_PROXY=socks5://127.0.0.1:1080&#34;</span>
</span></span><span style=display:flex><span>    alias git_clone_with_proxy<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ALL_PROXY=socks5://127.0.0.1:1080 git clone&#34;</span>
</span></span><span style=display:flex><span>    alias yay_with_proxy<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ALL_PROXY=socks5://127.0.0.1:1080 yay&#34;</span>
</span></span></code></pre></div><p><code>alias</code>的功能还是比较单一，毕竟从“别名”这个名字上就看出来了。不过好在还可以写函数，写函数这就是我们程序员比较擅长的了。这里简单介绍（真的超简单的那种）一下<code>Bash</code>的函数（当然<code>zsh</code>也是兼容的）</p><pre><code>foo() {
    # xxxxx
}
</code></pre><p>这就是一个函数的基本结构了，再配合参数：<code>$0 $1 $2 $3</code>这种就足够搞一些特别简单的函数了。我们一段命令如果前面固定后面是变动的那么可以方便得用<code>alias</code>比如：<code>docker-compose up -d web</code>和<code>docker-compose up -d test</code>这种就可以将前半部分搞成<code>alias</code>再拼起来用比如<code>alias dp-up-d="docker-compose up -d"</code>然后<code>dp-up-d web</code>就可以了。但是如果是<code>grep -Rn "hello" ~/articles</code>和<code>grep -Rn "world" ~/article</code>这种呢就比较麻烦，这时候就要用函数了。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    grep_this<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        grep -Rn <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> .
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></div><p>这个函数就可以通过<code>grep_this hello</code>来执行<code>grep -Rn "hello" .</code>这个命令。其中的参数：<code>$0</code>和<code>$1</code>指的就是整个命令用空格分隔之后的下标，例如<code>$1</code>指的就是整条命令用空格分隔后，下标为1的值，这里的实例函数也就是指的"hello"了。</p><p>这里给大家复制几条我自己的配置，可能是大家都用的到的</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    <span style=color:#75715e># v2er translate    # v2ex一老哥搞的词典api，直接用`v2 hello`就可以查到hello的中文（支持中英互转）</span>
</span></span><span style=display:flex><span>    v2<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      declare q<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$*<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>      curl --user-agent curl <span style=color:#e6db74>&#34;https://v2en.co/</span><span style=color:#e6db74>${</span>q// /%20<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># docker    # 使用`attach mysql`可以接入到含有mysql的行的docker容器的bash中（当有且仅有一个grep结果时才有效，有兴趣的老哥可以自行修改）</span>
</span></span><span style=display:flex><span>    attach<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      docker exec -it <span style=color:#e6db74>`</span>docker ps | grep $* | awk -F <span style=color:#e6db74>&#39; &#39;</span> <span style=color:#e6db74>&#39;{print $1}&#39;</span><span style=color:#e6db74>`</span> bash
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    attach_django<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      docker exec -it <span style=color:#e6db74>`</span>docker ps | grep $* | awk -F <span style=color:#e6db74>&#39; &#39;</span> <span style=color:#e6db74>&#39;{print $1}&#39;</span><span style=color:#e6db74>`</span> python manage.py shell
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    grep_this<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>   <span style=color:#75715e># `grep_this test`从当前目录递归找下去，将所有含有test的文本文件的行都输出出来</span>
</span></span><span style=display:flex><span>      grep -Rn <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> .
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    find_this<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>   <span style=color:#75715e># `find_this test`递归当前目录找到路径含test的</span>
</span></span><span style=display:flex><span>      find . -name <span style=color:#ae81ff>\*</span>$1<span style=color:#ae81ff>\*</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></div><h1 id=0x03-本地服务尽量docker化>0X03 本地服务尽量Docker化</h1><p>传统方式我们都是将本地开发所依赖的服务例如：MySQL和Redis这种直接部署一份。但是其实这种部署方式在开发环境是不太好的，强烈建议使用Docker部署。如果你同时要用3个MySQL版本，3个Redis版本，这只还要用5个Mongo版本，那怕不是要疯了对吧。</p><p>首先我们搞一个<code>docker</code>再搞一个<code>docker-compose</code>然后开始尝试部署环境（docker和docker-compose的安装这里就不说了）。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>    <span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;3&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>mysql</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>mysql:latest</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>dev_mysql</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>network_mode</span>: <span style=color:#ae81ff>bridge</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>always</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>          - <span style=color:#ae81ff>./data/mysql:/var/lib/mysql</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>          - <span style=color:#e6db74>&#34;3306:3306&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>          - <span style=color:#ae81ff>MYSQL_ROOT_PASSWORD=你的密码</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>command</span>: <span style=color:#ae81ff>mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>redis</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>redis:latest</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>dev_redis</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>network_mode</span>: <span style=color:#ae81ff>bridge</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>always</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>          - <span style=color:#e6db74>&#34;6379:6379&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>mongo</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>mongo:latest</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>dev_mongo</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>network_mode</span>: <span style=color:#ae81ff>bridge</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>always</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>          - <span style=color:#e6db74>&#34;27017:27017&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>          - <span style=color:#ae81ff>./data/mongo:/var/lib/mongo</span>
</span></span></code></pre></div><p>我们将内容保存为<code>docker-compose.yml</code>，并放到一个空目录下开始一波复杂的操作：首先执行<code>docker-compose up -d</code>，然后等一会儿，等拉完这三个镜像，接下来。。。。。。就好了（是的，这就好了）。这样你就在本地部署了<code>MySQL+Redis+Mongo</code>并且都是最新的版本，如果需要不同的版本可以这个样子</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>    <span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;3&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>mysql</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>mysql:latest</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>dev_mysql</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>network_mode</span>: <span style=color:#ae81ff>bridge</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>always</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>          - <span style=color:#ae81ff>./data/mysql:/var/lib/mysql</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>          - <span style=color:#e6db74>&#34;3306:3306&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>          - <span style=color:#ae81ff>MYSQL_ROOT_PASSWORD=你的密码</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>command</span>: <span style=color:#ae81ff>mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>mysql_old</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>mysql:5.7.17</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>dev_mysql</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>network_mode</span>: <span style=color:#ae81ff>bridge</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>always</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>          - <span style=color:#ae81ff>./data/mysql:/var/lib/mysql</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>          - <span style=color:#e6db74>&#34;3306:3306&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>          - <span style=color:#ae81ff>MYSQL_ROOT_PASSWORD=你的密码</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>command</span>: <span style=color:#ae81ff>mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span>
</span></span></code></pre></div><p>这时候用<code>docker-compose up -d mysql</code>和<code>docker-compose up -d mysql_old</code>就可以启动相应的版本了。</p><p><strong>注意</strong></p><blockquote><p>这里展示只是改了版本，不过改了版本的话数据文件的映射一定要改，要不然两个不同版本的MySQL用同一套数据文件会出问题的这里展示只是用了最简单的配置，除了MySQL其他的服务甚至没有密码，即使是开发欢迎也要<strong>注意数据安全</strong> 如果需要更深度的自定义每个服务就需要取看对应镜像和服务的官方文档了</p></blockquote><p>事实上我还用Docker部署过FTP方便同事的不同操作系统间快速传递文件，所以大大小小的服务只要想得到都可以用Docker来部署，不仅方便还能降低搞坏了的风险。</p><h1 id=0x03-一个py的小操作>0X03 一个Py的小操作</h1><p>现在有歌场景：你同事想从你电脑上搞个文件过去，该怎么搞？当然这有很多方法，但是有一个是非常简单快速的：找到你文件所在的目录<code>python3 -m http.server 2333</code>然后把<code>http://ip:2333</code>发给你的同事就好了。是的你没看错，用一行命令就启动了一个临时的web服务器。</p><p>这个操作应用场景也很多：你通过跳板机到服务器上导出了个数据，因为用的跳板机所以不能scp，那这时候<code>http.server</code>就是个好办法；甚至我还临时用这个命令给同事提供过<a href=https://github.com/kasuganosoras/cxk-ball target=_blank rel="noopener noreffer">CXK打球</a>的游戏呢哈哈哈。</p><h1 id=0x04-zsh没插件就像喝酒没酒精>0X04 zsh没插件就像喝酒没酒精</h1><p><code>zsh</code>作为一个所谓的“终极Shell”，支持的插件是非常非常多的。这里给大家看看我正在用的插件，配置文件是<code>~/.zshrc</code>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    plugins<span style=color:#f92672>=(</span>
</span></span><span style=display:flex><span>        z
</span></span><span style=display:flex><span>        git
</span></span><span style=display:flex><span>        fabric
</span></span><span style=display:flex><span>        extract
</span></span><span style=display:flex><span>        thefuck
</span></span><span style=display:flex><span>        fzf-zsh
</span></span><span style=display:flex><span>        git-open
</span></span><span style=display:flex><span>        virtualenvwrapper
</span></span><span style=display:flex><span>        colored-man-pages
</span></span><span style=display:flex><span>        zsh-autosuggestions
</span></span><span style=display:flex><span>        zsh-syntax-highlighting
</span></span><span style=display:flex><span>    <span style=color:#f92672>)</span>
</span></span></code></pre></div><p>这里挑几个介绍一下</p><h2 id=z>z</h2><p>我们在Linux下最常用的可能就是<code>cd</code>了，<code>z</code>配合<code>zsh</code>的原生功能可以让我们不再需要<code>cd</code>。比如我们经常去<code>~/Workstadion/too_young/simple</code>这个目录，那么以后就可以直接<code>z simple</code>跳过去了。其实是这样，你可以在终端直接用<code>z</code>来查看当前各个目录的权重，<code>z</code>命令就是从权重最高开始找，直到找到对应的目录并跳转过去。</p><p>另外我说的<code>zsh</code>原生功能是指：默认就是cd。比如我们在<code>zsh</code>中直接输入<code>/</code>就会跳到根目录，直接<code>..</code>就是上级，直接<code>~/Workstadion</code>就是对应的目录，省下了<code>cd</code>的过程</p><h2 id=fabric>fabric</h2><p>如果你用<code>fabric</code>的话，在<code>fabfile.py</code>存在的目录下输入<code>fab </code>再tab就可以补全<code>fabric</code>中的命令</p><h2 id=extract>extract</h2><p>我们知道解压<code>zip</code>要用<code>unzip</code>，解压<code>rar</code>要用<code>unrar</code>，解压<code>tar.gz</code>要用<code>tar -zxvf</code>&mldr;&mldr;知道是知道了，但是每次用起来还是有点麻烦，所以有了这个插件。不管你是啥<code>tar.gz/tar.xz/tar.bz2/zip/rar</code>，统统一个<code>x</code>全部解压。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    x qwer.zip
</span></span><span style=display:flex><span>    x asdf.rar
</span></span><span style=display:flex><span>    x zxcv.tar.gz
</span></span><span style=display:flex><span>    x qwer.tar.xz
</span></span></code></pre></div><h2 id=thefuck>thefuck</h2><p>顾名思义，当你想吼<code>fxxk</code>的时候，这个插件就有用了。<code>thefuck</code>是一个python程序，要用<code>pip install thefuck --user</code>来安装。装好之后再配合上这个插件就可以实现神奇的效果。比如当你在命令行里输入了一长串命令<code>git commmt -m "feat: 新增了什么鬼的需求点"</code>，显然前面的<code>commit</code>拼错了，如果是以前的话就只有返回去改。这时候就很想大吼<code>fxxk</code>了，但是请淡定。双击一下你的ESC键，会发现你的命令已经被自动修正并写在命令行里了。</p><p>是的，这个<code>thefuck</code>就是自动修复写错的命令的工具。</p><h2 id=zsh-autosuggestions和zsh-syntax-highlighting>zsh-autosuggestions和zsh-syntax-highlighting</h2><p>这两个都是需要手动安装的，可以去GitHub上搜一下，很简单。分别是实时提示命令的正确性和预先提示类似的历史命令的</p><h2 id=一句话介绍其他的>一句话介绍其他的：</h2><ol><li>git 是一堆现成的git的<code>alias</code></li><li>fzf-zsh 需要先安装<code>fzf</code>。在命令行里按下Ctrl+R，用新的逆向搜索替换原来不好用的老式搜索</li><li>git-open 用浏览器打开当前git仓库：支持GitHub和GitLab</li><li>colored-man-pages 彩色高亮的man</li></ol><h1 id=0x05-好像没啥了>0X05 好像没啥了</h1><p>一时半会也想不到有什么要补充的了，等什么时候想到新的了再搞吧。祝大家生活工作愉快~</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2025-01-16</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/linux/>Linux</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/living-on-linux-desktop/ class=prev rel=prev title="在 Linux 桌面下存活"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>在 Linux 桌面下存活</a>
<a href=/posts/mysql-slowquer-simple/ class=next rel=next title="MySQL 慢查询初步">MySQL 慢查询初步<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=gitalk class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://github.com/gitalk/gitalk></a>Gitalk</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.152.2">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2019 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Shawn</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/gitalk/gitalk.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><script type=text/javascript src=/lib/gitalk/gitalk.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/contrib/auto-render.min.js></script><script type=text/javascript src=/lib/katex/contrib/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:50},comment:{gitalk:{admin:[""],clientID:"",clientSecret:"",id:"2019-11-02T14:13:00Z",owner:"",repo:"",title:"在 Linux 桌面下活得舒服"}},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>