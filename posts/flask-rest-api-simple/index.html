<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>使用 Flask 设计实现一套 REST API【成绩管理系统】 - Shawn's blog</title><meta name=Description content="分享我的知识、经验、生活与感悟"><meta property="og:url" content="https://blog.programmer.work/posts/flask-rest-api-simple/"><meta property="og:site_name" content="Shawn's blog"><meta property="og:title" content="使用 Flask 设计实现一套 REST API【成绩管理系统】"><meta property="og:description" content="0X00 什么是REST风格的API 众所周知http协议有GET/PUT/POST/PATCH/DELETE等众多方法，还能在提交请求和发送响应的时候携带数据。REST风格的API就是使用了这些HTTP特性的API。针对一个URL可以有多种动词(方法)来表示不同的操作。 更多详细的内容可以点击查看阮一峰的博客：理解RESTful架构"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-06-03T07:37:00+00:00"><meta property="article:modified_time" content="2025-01-16T08:51:02+00:00"><meta property="article:tag" content="Flask"><meta property="article:tag" content="Python"><meta property="og:image" content="https://blog.programmer.work/logo.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.programmer.work/logo.png"><meta name=twitter:title content="使用 Flask 设计实现一套 REST API【成绩管理系统】"><meta name=twitter:description content="0X00 什么是REST风格的API 众所周知http协议有GET/PUT/POST/PATCH/DELETE等众多方法，还能在提交请求和发送响应的时候携带数据。REST风格的API就是使用了这些HTTP特性的API。针对一个URL可以有多种动词(方法)来表示不同的操作。 更多详细的内容可以点击查看阮一峰的博客：理解RESTful架构"><meta name=application-name content="Shawn's blog"><meta name=apple-mobile-web-app-title content="Shawn's blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://blog.programmer.work/posts/flask-rest-api-simple/><link rel=prev href=https://blog.programmer.work/posts/python-os-library/><link rel=next href=https://blog.programmer.work/posts/python-rabbitmq/><link rel=stylesheet href=/css/style.min.a118a80f53dfc7454ebe6058a7521ec2b9a7a11acddb327fefe07b8bf30632d2.css integrity="sha256-oRioD1Pfx0VOvmBYp1IewrmnoRrN2zJ/7+B7i/MGMtI="><link rel=preload href=/lib/fontawesome-free/all.min.0df5a33710e433de1f5415b1d47e4130ca7466aee5b81955f1045c4844bbb3ed.css integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.0df5a33710e433de1f5415b1d47e4130ca7466aee5b81955f1045c4844bbb3ed.css integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0="></noscript><link rel=preload href=/lib/animate/animate.min.5fbaeb9f8e25d7e0143bae61d4b1802c16ce7390b96ceb2d498b0d96ff4c853f.css integrity="sha256-X7rrn44l1+AUO65h1LGALBbOc5C5bOstSYsNlv9MhT8=" as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.5fbaeb9f8e25d7e0143bae61d4b1802c16ce7390b96ceb2d498b0d96ff4c853f.css integrity="sha256-X7rrn44l1+AUO65h1LGALBbOc5C5bOstSYsNlv9MhT8="></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"使用 Flask 设计实现一套 REST API【成绩管理系统】","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.programmer.work\/posts\/flask-rest-api-simple\/"},"genre":"posts","keywords":"Flask, Python","wordcount":3839,"url":"https:\/\/blog.programmer.work\/posts\/flask-rest-api-simple\/","datePublished":"2017-06-03T07:37:00+00:00","dateModified":"2025-01-16T08:51:02+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Shawn"},"description":""}</script></head><body data-header-desktop=auto data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"dark"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><script defer src=https://umami.just666.com/script.js data-website-id=627dda02-a907-4b89-91da-4a1e031a013e></script><div class=header-wrapper><div class=header-title><a href=/ title="Shawn's blog">Shawn's blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/about/>关于 </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Shawn's blog">Shawn's blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/about/ title>关于</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">使用 Flask 设计实现一套 REST API【成绩管理系统】</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://blog.programmer.work title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Shawn</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2017-06-03>2017-06-03</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;约 3839 字&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;预计阅读 8 分钟&nbsp;</div></div><div class="details toc" id=toc-static data-kept=true><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents></nav></div></div><div class=content id=content><h1 id=0x00-什么是rest风格的api>0X00 什么是REST风格的API</h1><p>众所周知http协议有<code>GET/PUT/POST/PATCH/DELETE</code>等众多方法，还能在提交请求和发送响应的时候携带数据。REST风格的API就是使用了这些HTTP特性的API。针对一个URL可以有多种动词(方法)来表示不同的操作。
更多详细的内容可以点击查看阮一峰的博客：<a href=http://www.ruanyifeng.com/blog/2011/09/restful.html target=_blank rel="noopener noreffer">理解RESTful架构</a></p><h1 id=0x01-怎么选用http动词>0X01 怎么选用HTTP动词</h1><p>常见的动词有这五种，可以对应自己的需求选用</p><p>| 动词 | 类似的SQL关键字 | 功能 |
| &mdash;- |: &mdash;- :|: &mdash;- :|
| GET | SELECT | 获取资源 |
| POST | CREATE | 创建资源 |
| PUT | UPDATE | 更新资源（需要提供改变后的完整资源） |
| PATCH | UPDATE | 更新资源（需要提供改变的属性） |
| DELETE | DELETE | 删除资源 |</p><h1 id=0x02-设计url>0X02 设计URL</h1><p>REST风格的API因为可以用HTTP的动词，所以URL中是不带有动词的，如果我要获取某个学生的信息应该是<code>[GET] http://api.example.com/student/id=12345678900</code>。HTTP动词理论上是能满足各种情况下的需求的，所以URL中只应该出现名词而不应该出现动词。这里用阮一峰举的例子来说明一下</p><p>| 动词 | 路径 | 功能 |
| &ndash;|&mdash; |
| GET | /zoos | 列出所有动物园 |
| POST | /zoos | 新建一个动物园 |
| GET | /zoos/ID | 获取某个指定动物园的信息 |
| PUT | /zoos/ID | 更新某个指定动物园的信息（提供该动物园的全部信息） |
| PATCH | /zoos/ID | 更新某个指定动物园的信息（提供该动物园的部分信息） |
| DELETE | /zoos/ID | 删除某个动物园 |
| GET | /zoos/ID/animals | 列出某个指定动物园的所有动物 |
| DELETE | /zoos/ID/animals/ID | 删除某个指定动物园的指定动物 |</p><h1 id=0x03-状态码>0X03 状态码</h1><p>状态码是HTTP中的一大优势，一个响应可以只靠状态码来判请求结果。这些是常见的状态码，自己设计API的时候要严格按照规范来设计状态码，可以提高代码和API的可读性和可理解性。</p><table><thead><tr><th>状态码</th><th>信息</th><th>请求类型</th><th>含义</th></tr></thead><tbody><tr><td>200</td><td>OK</td><td>[GET]</td><td>服务器成功返回用户请求的数据，该操作是幂等的（Idempotent）。</td></tr><tr><td>201</td><td>CREATED</td><td>[POST/PUT/PATCH]</td><td>用户新建或修改数据成功。</td></tr><tr><td>202</td><td>Accepted</td><td>[*]</td><td>表示一个请求已经进入后台排队（异步任务）。</td></tr><tr><td>204</td><td>NO CONTENT</td><td>[DELETE]</td><td>用户删除数据成功。</td></tr><tr><td>400</td><td>INVALID REQUEST</td><td>[POST/PUT/PATCH]</td><td>用户发出的请求有错误，服务器没有进行新建或修改数据的操作，该操作是幂等的。</td></tr><tr><td>401</td><td>Unauthorized</td><td>[*]</td><td>表示用户没有权限（令牌、用户名、密码错误）。</td></tr><tr><td>403</td><td>Forbidden</td><td>[*]</td><td>表示用户得到授权（与401错误相对），但是访问是被禁止的。</td></tr><tr><td>404</td><td>NOT FOUND</td><td>[*]</td><td>用户发出的请求针对的是不存在的记录，服务器没有进行操作，该操作是幂等的。</td></tr><tr><td>406</td><td>Not Acceptable</td><td>[GET]</td><td>用户请求的格式不可得（比如用户请求JSON格式，但是只有XML格式）。</td></tr><tr><td>410</td><td>Gone</td><td>[GET]</td><td>用户请求的资源被永久删除，且不会再得到的。</td></tr><tr><td>422</td><td>Unprocesable entity</td><td>[POST/PUT/PATCH]</td><td>当创建一个对象时，发生一个验证错误。</td></tr><tr><td>500</td><td>INTERNAL SERVER ERROR</td><td>[*]</td><td>服务器发生错误，用户将无法判断发出的请求是否成功。</td></tr></tbody></table><h1 id=0x04-如何用python实现>0X04 如何用Python实现</h1><p>Python有大量第三方库可以实现REST风格的API，我这里选用的是相对轻量化的一个 <a href=http://flask.pocoo.org/ target=_blank rel="noopener noreffer">Flask</a>。安装这个库最简单的方式还是用pip，根据环境变量的不同可能具体命令有所不同，在我的Linux上是用<code>pip3 install flask</code>就可以直接安装好的。
安装好后进入Python的交互式界面输入<code>import flask</code>如果没有出现<code>Import Error</code>就是安装好了。</p><h1 id=0x05创建数据库和表>0X05创建数据库和表</h1><p>现在可以开始设计API了。既然是成绩管理系统，那么首先就要创建一个数据库，我这里的数据库是用的MariaDB。</p><table><thead><tr><th>列名</th><th>类型</th><th>含义</th><th>键</th></tr></thead><tbody><tr><td>id</td><td>int</td><td>编号</td><td>主键</td></tr><tr><td>name</td><td>varchar(10)</td><td>学生姓名</td><td></td></tr><tr><td>number</td><td>char(11)</td><td>学号</td><td></td></tr><tr><td>python</td><td>float</td><td>Py成绩</td><td></td></tr><tr><td>cpp</td><td>float</td><td>c++成绩</td><td></td></tr><tr><td>os</td><td>float</td><td>操作系统成绩</td><td></td></tr><tr><td>network</td><td>float</td><td>计算机网络成绩</td><td></td></tr><tr><td>total</td><td>float</td><td>总分</td><td></td></tr><tr><td>ave</td><td>float</td><td>平均分</td><td></td></tr></tbody></table><h1 id=0x06-创建py脚本>0X06 创建Py脚本</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#f92672>from</span> flask <span style=color:#f92672>import</span> Flask, request
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    app <span style=color:#f92672>=</span> Flask(__name__)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 从这里指定路径、方法、返回数据</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;GET&#39;</span>])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>index</span>():
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;&lt;h1&gt;hello,world&lt;/h1&gt;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> app<span style=color:#f92672>.</span>test_request_context():
</span></span><span style=display:flex><span>        app<span style=color:#f92672>.</span>run()
</span></span></code></pre></div><p>这段代码写好之后运行起来会在本地监听5000端口(默认的)，然后当你用浏览器访问<code>http://localhost:5000/</code>的时候就像你返回<code>&lt;h1>hello,world&lt;/h1></code>，在浏览器页面下看到的就是一行大号的hello,world。因为在浏览器的地址栏输入URL按回车之后就是向那个URL发送了GET请求，也就正好调用了<code>index()</code>方法。</p><p>这里先将与API无关的代码填好，下面开始正式完成各项功能。其实也就是连接了数据库而已</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#f92672>from</span> flask <span style=color:#f92672>import</span> Flask, request
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> json
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> pymysql
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    app <span style=color:#f92672>=</span> Flask(__name__)
</span></span><span style=display:flex><span>    database <span style=color:#f92672>=</span> pymysql<span style=color:#f92672>.</span>connect(<span style=color:#e6db74>&#34;db_host&#34;</span>, <span style=color:#e6db74>&#34;db_username&#34;</span>, <span style=color:#e6db74>&#34;db_password&#34;</span>, <span style=color:#e6db74>&#34;db_name&#34;</span>)
</span></span><span style=display:flex><span>    cursor <span style=color:#f92672>=</span> database<span style=color:#f92672>.</span>cursor()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;GET&#39;</span>])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>index</span>():
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;&lt;h1&gt;hello,world&lt;/h1&gt;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> app<span style=color:#f92672>.</span>test_request_context():
</span></span><span style=display:flex><span>        app<span style=color:#f92672>.</span>run()
</span></span></code></pre></div><h1 id=0x07-实现一个构造返回json数据的方法>0X07 实现一个构造返回Json数据的方法</h1><p>首先我们选择使用Json来作为数据传输格式，因为Json相对XML来说更轻量一点，现在也更流行。规定客户端每次请求会后服务器都会返回下面这样类型的Json数据</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>    {
</span></span><span style=display:flex><span>    	<span style=color:#f92672>&#34;time&#34;</span>: <span style=color:#e6db74>&#34;unix_time&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>“e_msg</span><span style=color:#f92672>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>error_message</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &#34;</span><span style=color:#960050;background-color:#1e0010>search_list</span><span style=color:#e6db74>&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        	&#34;</span><span style=color:#960050;background-color:#1e0010>item</span><span style=color:#ae81ff>0</span><span style=color:#e6db74>&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            	&#34;</span><span style=color:#960050;background-color:#1e0010>name</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>name</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;</span><span style=color:#960050;background-color:#1e0010>number</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>number</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;</span><span style=color:#960050;background-color:#1e0010>python</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>marks</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;</span><span style=color:#960050;background-color:#1e0010>os</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>marks</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;</span><span style=color:#960050;background-color:#1e0010>network</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>marks</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;</span><span style=color:#960050;background-color:#1e0010>cpp</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>marks</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;</span><span style=color:#960050;background-color:#1e0010>total</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>marks</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;</span><span style=color:#960050;background-color:#1e0010>ave</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>ave</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            },&#34;</span><span style=color:#960050;background-color:#1e0010>item</span><span style=color:#ae81ff>1</span><span style=color:#e6db74>&#34; : {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            	&#34;</span><span style=color:#960050;background-color:#1e0010>name</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>name</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;</span><span style=color:#960050;background-color:#1e0010>number</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>number</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;</span><span style=color:#960050;background-color:#1e0010>python</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>marks</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;</span><span style=color:#960050;background-color:#1e0010>os</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>marks</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;</span><span style=color:#960050;background-color:#1e0010>network</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>marks</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;</span><span style=color:#960050;background-color:#1e0010>cpp</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>marks</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;</span><span style=color:#960050;background-color:#1e0010>total</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>marks</span><span style=color:#e6db74>&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;</span><span style=color:#960050;background-color:#1e0010>ave</span><span style=color:#e6db74>&#34;: &#34;</span><span style=color:#960050;background-color:#1e0010>ave&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>}</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>}</span>
</span></span></code></pre></div><p>API提供增删查改功能，增删改只通过状态码就可以判断执行结果，只有查询的时候才会需要从响应中获取数据。</p><h1 id=0x08-增加一条新的数据>0X08 增加一条新的数据</h1><p>添加一条新数据按照标准应该使用动词<code>POST</code>，根据URL中只有名词不用动词只有名词的标准，隧将URL设计成<code>http://localhost/student</code>，再依据标准添加版本号上去，变成<code>http://localhost/v1/student</code>。
具体功能代码实现如下，</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/v1/student&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;POST&#39;</span>]) <span style=color:#75715e># 路径为/v1/student，方法为POST</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>add_student</span>():
</span></span><span style=display:flex><span>        data <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>get_data()<span style=color:#f92672>.</span>decode(<span style=color:#e6db74>&#39;utf-8&#39;</span>)   <span style=color:#75715e># 将客户端传来的数据解码</span>
</span></span><span style=display:flex><span>        json_data <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>loads(data)    <span style=color:#75715e># 将数据转为Json</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 从Json中获取数据</span>
</span></span><span style=display:flex><span>        name <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;name&#39;</span>]
</span></span><span style=display:flex><span>        number <span style=color:#f92672>=</span> str(json_data[<span style=color:#e6db74>&#39;number&#39;</span>])
</span></span><span style=display:flex><span>        python <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;python&#39;</span>]
</span></span><span style=display:flex><span>        cpp <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;cpp&#39;</span>]
</span></span><span style=display:flex><span>        os <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;os&#39;</span>]
</span></span><span style=display:flex><span>        network <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;network&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 计算总分平均分</span>
</span></span><span style=display:flex><span>        total <span style=color:#f92672>=</span> python <span style=color:#f92672>+</span> cpp <span style=color:#f92672>+</span> os <span style=color:#f92672>+</span> network
</span></span><span style=display:flex><span>        ave <span style=color:#f92672>=</span> total <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 查询数据库中是否有该学生的信息</span>
</span></span><span style=display:flex><span>        sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SELECT COUNT(*) FROM student.marks WHERE number=</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> number
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(sql)
</span></span><span style=display:flex><span>        count <span style=color:#f92672>=</span> cursor<span style=color:#f92672>.</span>fetchall()[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>        database<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> count <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>1</span>:  <span style=color:#75715e># 该学生信息已经存在，返回400错误</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> build_json(e_msg<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;student early exist&#34;</span>), <span style=color:#ae81ff>400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 向数据库中插入数据</span>
</span></span><span style=display:flex><span>        sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;INSERT INTO student.marks (name, number, python, os, network, cpp, total, ave)&#34;</span> \
</span></span><span style=display:flex><span>              <span style=color:#e6db74>&#34;VALUES (</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>, </span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>, </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>)&#34;</span> <span style=color:#f92672>%</span> (name, number, python, os,
</span></span><span style=display:flex><span>                                                                   network, cpp, total, ave)
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(sql)
</span></span><span style=display:flex><span>        database<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 请求成功，返回201状态码</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> build_json(), <span style=color:#ae81ff>201</span>
</span></span></code></pre></div><h1 id=0x09-删除已经存在的数据>0X09 删除已经存在的数据</h1><p>根据标准，将API设计成<code>DELETE</code>方法，URL为<code>http://localhost/v1/student/number=&lt;number></code>
第一行的<code>number=&lt;number></code>可以将url中符合这种规范的匹配出来，配合方法定义时的参数，可以直接将url参数传入到方法体中。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/v1/student/number=&lt;number&gt;&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;DELETE&#39;</span>])  <span style=color:#75715e># 路径为/v1/student, 方法为DELETE</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>delete_student</span>(number):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> number<span style=color:#f92672>.</span>isdigit():    <span style=color:#75715e># 判断number是否合法</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> build_json(e_msg<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number should be digit&#34;</span>), <span style=color:#ae81ff>403</span>
</span></span><span style=display:flex><span>        sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;DELETE FROM student.marks WHERE number=</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> number
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(sql)
</span></span><span style=display:flex><span>        database<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> build_json(), <span style=color:#ae81ff>204</span>
</span></span></code></pre></div><h1 id=0x0a-查询学生成绩>0X0A 查询学生成绩</h1><p>根据标准，将API设计成<code>GET</code>方法，URL为<code>http://localhost/v1/student/sort_by=&lt;sort_by></code>。提供了<code>python/cpp/network/os/total/ave</code>排序方式，（其实是数据库实现的）。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/v1/student/sort_by=&lt;sort_by&gt;&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;GET&#39;</span>])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>show_student</span>(sort_by):
</span></span><span style=display:flex><span>        <span style=color:#75715e># 判断排序的key是否正确</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> sort_by <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> [<span style=color:#e6db74>&#39;python&#39;</span>, <span style=color:#e6db74>&#39;cpp&#39;</span>, <span style=color:#e6db74>&#39;os&#39;</span>, <span style=color:#e6db74>&#39;network&#39;</span>, <span style=color:#e6db74>&#39;total&#39;</span>, <span style=color:#e6db74>&#39;ave&#39;</span>]:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> build_json(e_msg<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sort_by key not found&#34;</span>), <span style=color:#ae81ff>404</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 构建查询SQL</span>
</span></span><span style=display:flex><span>        sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SELECT name, number, python, cpp, os, network, total, ave FROM student.marks ORDER BY </span><span style=color:#e6db74>%s</span><span style=color:#e6db74> DESC&#34;</span> <span style=color:#f92672>%</span> sort_by
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(sql)
</span></span><span style=display:flex><span>        database<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>        res <span style=color:#f92672>=</span> cursor<span style=color:#f92672>.</span>fetchall() <span style=color:#75715e># 获取查询结果</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 构建查询结果Json</span>
</span></span><span style=display:flex><span>        res_list <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>        count <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> res:
</span></span><span style=display:flex><span>            res_list[<span style=color:#e6db74>&#39;item&#39;</span> <span style=color:#f92672>+</span> str(count)] <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;name&#39;</span>: i[<span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;number&#39;</span>: i[<span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;python&#39;</span>: i[<span style=color:#ae81ff>2</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;cpp&#39;</span>: i[<span style=color:#ae81ff>3</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;os&#39;</span>: i[<span style=color:#ae81ff>4</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;network&#39;</span>: i[<span style=color:#ae81ff>5</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;total&#39;</span>: i[<span style=color:#ae81ff>6</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;ave&#39;</span>: [i[<span style=color:#ae81ff>7</span>]]
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            count <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> build_json(search_list<span style=color:#f92672>=</span>res_list), <span style=color:#ae81ff>200</span>
</span></span></code></pre></div><h1 id=0x0b-修改学生成绩>0X0B 修改学生成绩</h1><p>修改学生成绩和添加成绩几乎是一样的操作，只有这么几点是不太一样的。添加信息时如果学号已经存在了那就不能再添加了，而修改的时候是如果学号不存在才错误；添加和修改的SQL不同。就没有别的区别了。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/v1/student&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;PUT&#39;</span>])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>modify_student</span>():
</span></span><span style=display:flex><span>        data <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>get_data()<span style=color:#f92672>.</span>decode(<span style=color:#e6db74>&#39;utf-8&#39;</span>)
</span></span><span style=display:flex><span>        json_data <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>loads(data)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 从Json中获取数据</span>
</span></span><span style=display:flex><span>        name <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;name&#39;</span>]
</span></span><span style=display:flex><span>        number <span style=color:#f92672>=</span> str(json_data[<span style=color:#e6db74>&#39;number&#39;</span>])
</span></span><span style=display:flex><span>        python <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;python&#39;</span>]
</span></span><span style=display:flex><span>        cpp <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;cpp&#39;</span>]
</span></span><span style=display:flex><span>        os <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;os&#39;</span>]
</span></span><span style=display:flex><span>        network <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;network&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 查询数据库中是否有该学生的信息</span>
</span></span><span style=display:flex><span>        sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SELECT COUNT(*) FROM student.marks WHERE number=</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> number
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(sql)
</span></span><span style=display:flex><span>        count <span style=color:#f92672>=</span> cursor<span style=color:#f92672>.</span>fetchall()[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>        database<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> count <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1</span>:  <span style=color:#75715e># 该学生信息不存在，返回404错误</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> build_json(e_msg<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;student not found&#34;</span>), <span style=color:#ae81ff>404</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 计算总分平均分</span>
</span></span><span style=display:flex><span>        total <span style=color:#f92672>=</span> python <span style=color:#f92672>+</span> cpp <span style=color:#f92672>+</span> os <span style=color:#f92672>+</span> network
</span></span><span style=display:flex><span>        ave <span style=color:#f92672>=</span> total <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 向数据库中插入数据</span>
</span></span><span style=display:flex><span>        sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;UPDATE student.marks SET name=</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>, python=</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, cpp=</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, os=</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, network=</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, total=</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, ave=</span><span style=color:#e6db74>%s</span><span style=color:#e6db74> WHERE number=</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> (name, python, cpp, os, network, total, ave, number)
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(sql)
</span></span><span style=display:flex><span>        database<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 请求成功，返回201状态码</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> build_json(), <span style=color:#ae81ff>201</span>
</span></span></code></pre></div><h1 id=0x0c-搞定所有api>0X0C 搞定所有API</h1><p>现在就搞定了所有的API编写。现在我把所有代码贴上来，注意这段代码是用于Python3的。如果需要测试的话可以用Python自带的<code>requests</code>模块或者<a href=https://www.getpostman.com target=_blank rel="noopener noreffer">Postman软件</a>来测试该API。</p><ul><li>声明：代码最后一行的<code>app.run()</code>方法，现在是只在本地监听的。可以改成<code>app.run('0.0.0.0')</code>就对外部监听了。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#75715e>#!/usr/bin/env python3</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># coding=utf-8</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># @Time    : 2017/6/3 11:34</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># @Author  : Shawn</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># @Blog    : https://blog.just666.cn</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># @Email   : shawnbluce@gmail.com</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># @purpose : 演示Python_API</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>from</span> flask <span style=color:#f92672>import</span> Flask, request
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> json
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> pymysql
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    app <span style=color:#f92672>=</span> Flask(__name__)
</span></span><span style=display:flex><span>    database <span style=color:#f92672>=</span> pymysql<span style=color:#f92672>.</span>connect(<span style=color:#e6db74>&#34;115.29.52.14&#34;</span>, <span style=color:#e6db74>&#34;shawn&#34;</span>, <span style=color:#e6db74>&#34;zhangHAO8&#34;</span>, <span style=color:#e6db74>&#34;student&#34;</span>)
</span></span><span style=display:flex><span>    cursor <span style=color:#f92672>=</span> database<span style=color:#f92672>.</span>cursor()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>build_json</span>(search_list<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>, e_msg<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>) <span style=color:#f92672>-&gt;</span> str:
</span></span><span style=display:flex><span>        json_data <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;time&#39;</span>: time<span style=color:#f92672>.</span>time(), <span style=color:#e6db74>&#39;search_list&#39;</span>: search_list, <span style=color:#e6db74>&#39;e_msg&#39;</span>: e_msg}
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> json<span style=color:#f92672>.</span>dumps(json_data)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;GET&#39;</span>])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>index</span>():
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;&lt;h1&gt;hello,world&lt;/h1&gt;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/v1/student&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;POST&#39;</span>]) <span style=color:#75715e># 路径为/v1/student，方法为POST</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>add_student</span>():
</span></span><span style=display:flex><span>        data <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>get_data()<span style=color:#f92672>.</span>decode(<span style=color:#e6db74>&#39;utf-8&#39;</span>)   <span style=color:#75715e># 将客户端传来的数据解码</span>
</span></span><span style=display:flex><span>        json_data <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>loads(data)    <span style=color:#75715e># 将数据转为Json</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 从Json中获取数据</span>
</span></span><span style=display:flex><span>        name <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;name&#39;</span>]
</span></span><span style=display:flex><span>        number <span style=color:#f92672>=</span> str(json_data[<span style=color:#e6db74>&#39;number&#39;</span>])
</span></span><span style=display:flex><span>        python <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;python&#39;</span>]
</span></span><span style=display:flex><span>        cpp <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;cpp&#39;</span>]
</span></span><span style=display:flex><span>        os <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;os&#39;</span>]
</span></span><span style=display:flex><span>        network <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;network&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 计算总分平均分</span>
</span></span><span style=display:flex><span>        total <span style=color:#f92672>=</span> python <span style=color:#f92672>+</span> cpp <span style=color:#f92672>+</span> os <span style=color:#f92672>+</span> network
</span></span><span style=display:flex><span>        ave <span style=color:#f92672>=</span> total <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 查询数据库中是否有该学生的信息</span>
</span></span><span style=display:flex><span>        sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SELECT COUNT(*) FROM student.marks WHERE number=</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> number
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(sql)
</span></span><span style=display:flex><span>        count <span style=color:#f92672>=</span> cursor<span style=color:#f92672>.</span>fetchall()[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>        database<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> count <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>1</span>:  <span style=color:#75715e># 该学生信息已经存在，返回400错误</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> build_json(e_msg<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;student early exist&#34;</span>), <span style=color:#ae81ff>400</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 向数据库中插入数据</span>
</span></span><span style=display:flex><span>        sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;INSERT INTO student.marks (name, number, python, os, network, cpp, total, ave)&#34;</span> \
</span></span><span style=display:flex><span>              <span style=color:#e6db74>&#34;VALUES (</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>, </span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>, </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>)&#34;</span> <span style=color:#f92672>%</span> (name, number, python, os,
</span></span><span style=display:flex><span>                                                                   network, cpp, total, ave)
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(sql)
</span></span><span style=display:flex><span>        database<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 请求成功，返回201状态码</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> build_json(), <span style=color:#ae81ff>201</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/v1/student/number=&lt;number&gt;&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;DELETE&#39;</span>])  <span style=color:#75715e># 路径为/v1/student, 方法为DELETE</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>delete_student</span>(number):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> number<span style=color:#f92672>.</span>isdigit():    <span style=color:#75715e># 判断number是否合法</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> build_json(e_msg<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;number should be digit&#34;</span>), <span style=color:#ae81ff>403</span>
</span></span><span style=display:flex><span>        sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;DELETE FROM student.marks WHERE number=</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> number
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(sql)
</span></span><span style=display:flex><span>        database<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> build_json(), <span style=color:#ae81ff>204</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/v1/student/sort_by=&lt;sort_by&gt;&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;GET&#39;</span>])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>show_student</span>(sort_by):
</span></span><span style=display:flex><span>        <span style=color:#75715e># 判断排序的key是否正确</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> sort_by <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> [<span style=color:#e6db74>&#39;python&#39;</span>, <span style=color:#e6db74>&#39;cpp&#39;</span>, <span style=color:#e6db74>&#39;os&#39;</span>, <span style=color:#e6db74>&#39;network&#39;</span>, <span style=color:#e6db74>&#39;total&#39;</span>, <span style=color:#e6db74>&#39;ave&#39;</span>]:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> build_json(e_msg<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sort_by key not found&#34;</span>), <span style=color:#ae81ff>404</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 构建查询SQL</span>
</span></span><span style=display:flex><span>        sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SELECT name, number, python, cpp, os, network, total, ave FROM student.marks ORDER BY </span><span style=color:#e6db74>%s</span><span style=color:#e6db74> DESC&#34;</span> <span style=color:#f92672>%</span> sort_by
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(sql)
</span></span><span style=display:flex><span>        database<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>        res <span style=color:#f92672>=</span> cursor<span style=color:#f92672>.</span>fetchall()  <span style=color:#75715e># 获取查询结果</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 构建查询结果Json</span>
</span></span><span style=display:flex><span>        res_list <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>        count <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> res:
</span></span><span style=display:flex><span>            res_list[<span style=color:#e6db74>&#39;item&#39;</span> <span style=color:#f92672>+</span> str(count)] <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;name&#39;</span>: i[<span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;number&#39;</span>: i[<span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;python&#39;</span>: i[<span style=color:#ae81ff>2</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;cpp&#39;</span>: i[<span style=color:#ae81ff>3</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;os&#39;</span>: i[<span style=color:#ae81ff>4</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;network&#39;</span>: i[<span style=color:#ae81ff>5</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;total&#39;</span>: i[<span style=color:#ae81ff>6</span>],
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;ave&#39;</span>: [i[<span style=color:#ae81ff>7</span>]]
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            count <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> build_json(search_list<span style=color:#f92672>=</span>res_list), <span style=color:#ae81ff>200</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/v1/student&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;PUT&#39;</span>])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>modify_student</span>():
</span></span><span style=display:flex><span>        data <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>get_data()<span style=color:#f92672>.</span>decode(<span style=color:#e6db74>&#39;utf-8&#39;</span>)
</span></span><span style=display:flex><span>        json_data <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>loads(data)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 从Json中获取数据</span>
</span></span><span style=display:flex><span>        name <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;name&#39;</span>]
</span></span><span style=display:flex><span>        number <span style=color:#f92672>=</span> str(json_data[<span style=color:#e6db74>&#39;number&#39;</span>])
</span></span><span style=display:flex><span>        python <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;python&#39;</span>]
</span></span><span style=display:flex><span>        cpp <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;cpp&#39;</span>]
</span></span><span style=display:flex><span>        os <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;os&#39;</span>]
</span></span><span style=display:flex><span>        network <span style=color:#f92672>=</span> json_data[<span style=color:#e6db74>&#39;network&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 查询数据库中是否有该学生的信息</span>
</span></span><span style=display:flex><span>        sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;SELECT COUNT(*) FROM student.marks WHERE number=</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> number
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(sql)
</span></span><span style=display:flex><span>        count <span style=color:#f92672>=</span> cursor<span style=color:#f92672>.</span>fetchall()[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>        database<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> count <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1</span>:  <span style=color:#75715e># 该学生信息不存在，返回404错误</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> build_json(e_msg<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;student not found&#34;</span>), <span style=color:#ae81ff>404</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 计算总分平均分</span>
</span></span><span style=display:flex><span>        total <span style=color:#f92672>=</span> python <span style=color:#f92672>+</span> cpp <span style=color:#f92672>+</span> os <span style=color:#f92672>+</span> network
</span></span><span style=display:flex><span>        ave <span style=color:#f92672>=</span> total <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 向数据库中插入数据</span>
</span></span><span style=display:flex><span>        sql <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;UPDATE student.marks SET name=</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>, python=</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, cpp=</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, os=</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, network=</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, total=</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>, ave=</span><span style=color:#e6db74>%s</span><span style=color:#e6db74> WHERE number=</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>&#34;</span> \
</span></span><span style=display:flex><span>              <span style=color:#f92672>%</span> (name, python, cpp, os, network, total, ave, number)
</span></span><span style=display:flex><span>        cursor<span style=color:#f92672>.</span>execute(sql)
</span></span><span style=display:flex><span>        database<span style=color:#f92672>.</span>commit()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 请求成功，返回201状态码</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> build_json(), <span style=color:#ae81ff>201</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> app<span style=color:#f92672>.</span>test_request_context():
</span></span><span style=display:flex><span>        app<span style=color:#f92672>.</span>run()
</span></span></code></pre></div></div><style>.reward-container{max-width:500px;margin:50px auto;padding:30px;text-align:center;background:0 0;border-radius:12px}.reward-title{font-size:20px;margin-bottom:30px}.reward-icons{display:flex;justify-content:center;gap:40px}.reward-item{position:relative;cursor:pointer}.reward-item img{width:60px;height:60px;transition:transform .3s}.reward-item:hover img{transform:scale(1.1)}.qrcode{position:absolute;bottom:80px;left:50%;transform:translateX(-50%);background:#fff;padding:15px;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.15);opacity:0;visibility:hidden;transition:all .3s}.reward-item:hover .qrcode{opacity:1;visibility:visible}.qrcode img{width:200px;height:200px;display:block}</style><div class=reward-container><div class=reward-title>☕ 如果喜欢这篇文章，欢迎打赏 5 毛钱</div><div class=reward-icons><div class=reward-item><img src=/alipay-logo.png alt=支付宝><div class=qrcode><img src=/alipay-qr.jpeg alt=支付宝二维码></div></div><div class=reward-item><img src=/trc20-logo.png alt=USDT><div class=qrcode><img src=/usdt-qr.jpeg alt=USDT二维码></div></div><div class=reward-item><img src=/wechatpay-logo.png alt=微信><div class=qrcode><img src=/wechat-qr.jpeg alt=微信二维码></div></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2025-01-16</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/flask/>Flask</a>,&nbsp;<a href=/tags/python/>Python</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/python-os-library/ class=prev rel=prev title="Python 中 OS 库的常用方法"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Python 中 OS 库的常用方法</a>
<a href=/posts/python-rabbitmq/ class=next rel=next title="使用 Python 操作消息队列 RabbitMQ">使用 Python 操作消息队列 RabbitMQ<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=gitalk class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://github.com/gitalk/gitalk></a>Gitalk</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Shawn 💗 Amber</div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2015 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://blog.programmer.work target=_blank>Shawn</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/gitalk/gitalk.min.7a92033a32beba2a57cd417e2d5ab7ac2a45bf5111227648ac274b81e6a6cf57.css integrity="sha256-epIDOjK+uipXzUF+LVq3rCpFv1ERInZIrCdLgeamz1c="><link rel=stylesheet href=/lib/katex/katex.min.76e39bd605d45b2d1944123c66608b0c8bb9baeb70720b212571531c7cf9bc2a.css integrity="sha256-duOb1gXUWy0ZRBI8ZmCLDIu5uutwcgshJXFTHHz5vCo="><link rel=stylesheet href=/some.4187f1011616875f9033a8af97475eb55b97ed2f80267e22df0cd8305de45cc8.css integrity="sha256-QYfxARYWh1+QM6ivl0detVuX7S+AJn4i3wzYMF3kXMg="><script type=text/javascript src=/lib/gitalk/gitalk.min.3e68fce688cb68f396c11b65309c267b307f420f01cef269e5e4f3bd769801f0.js integrity="sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.3d9120fa621da6d613c1698b7014ec6bdf4620366e8f2b7b547059f4b6f6272b.js integrity="sha256-PZEg+mIdptYTwWmLcBTsa99GIDZujyt7VHBZ9Lb2Jys="></script><script type=text/javascript src=/lib/clipboard/clipboard.min.e17a1d816e13c0826e0ed7febfabc3277f45571234bde0bf9120829a7169edc9.js integrity="sha256-4XodgW4TwIJuDtf+v6vDJ39FVxI0veC/kSCCmnFp7ck="></script><script type=text/javascript src=/lib/katex/katex.min.eb18207487161674e717087c317db14ac1a62dadaecccb802499ce173bfeb739.js integrity="sha256-6xggdIcWFnTnFwh8MX2xSsGmLa2uzMuAJJnOFzv+tzk="></script><script type=text/javascript src=/lib/katex/contrib/auto-render.min.cb7f4ca60ed5dc3e258415f8c7a3b46d4a93578a52adf83011f18a7f190e7602.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="></script><script type=text/javascript src=/lib/katex/contrib/copy-tex.min.52ce78fab4860d24ef22128a52ce24ca01368a9034457a565a1d3fccbab0ddbb.js integrity="sha256-Us54+rSGDSTvIhKKUs4kygE2ipA0RXpWWh0/zLqw3bs="></script><script type=text/javascript src=/lib/katex/contrib/mhchem.min.5c0a121a8b490afc85860a522347aeb34fb508c6b23044e5d29f6b2194227b51.js integrity="sha256-XAoSGotJCvyFhgpSI0eus0+1CMayMETl0p9rIZQie1E="></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:50},comment:{gitalk:{admin:["shawn-bluce"],clientID:"Ov23ligzD7mU8WBsue6H",clientSecret:"a832d1ba967e3a40f5485aa05e2a9e76f2d77901",id:"2017-06-03T07:37:00Z",owner:"shawn-bluce",repo:"shawn-bluce.github.io",title:"使用 Flask 设计实现一套 REST API【成绩管理系统】"}},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1}}</script><script type=text/javascript src=/js/theme.min.612a51a43205bbcf3b4af348dc2e8aa60f77f4fe5535ebc57f13054b61607d6c.js integrity="sha256-YSpRpDIFu887SvNI3C6Kpg939P5VNevFfxMFS2FgfWw="></script></body></html>